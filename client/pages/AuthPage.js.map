{"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;;;;;;;;;;;;;;;;ACAA;;AAGe,kDAAsB,MAAE,EAAE,CAAA,EAAE,EAAE;IAC3C,MAAM,QAAQ,GAAG,CAAA,GAAA,kBAAW,CAAA,EAAE;IAC9B,CAAA,GAAA,gBAAS,CAAA,CAAC,IAAM;QAAE,QAAQ,CAAC,EAAE,CAAC;KAAE,EAAE,EAAE,CAAC;IACrC,OAAO,CAAC,GAAG,CAAC,iBAAiB,EAAE,EAAE,CAAC;IAClC,OAAO,IAAI,CAAA;CACZ;;;;;;;;;;;;;ACRD;;;;;;;;ACCA;;;;;;;ACDA;;;;;;;ACAA;AAEA,MAAM,0BAAI,GAAG,IAAM,EAAE;AAEN,oDAAyB;IACtC,IAAI,QAAQ,GAAG,CAAA,GAAA,eAAQ,CAAA,EAAE,CAAC,CAAC,CAAC;IAC5B,CAAA,GAAA,gBAAS,CAAA,CAAC,IAAM,IAAM;YAAE,QAAQ,GAAG,0BAAI;SAAE,EAAE,EAAE,CAAC;IAC9C,OAAO,CAAA,GAAA,kBAAW,CAAA,CAAC,IAAM;QAAE,QAAQ,CAAC,EAAE,CAAC;KAAE,EAAE,EAAE,CAAC,CAAA;CAC/C;;;ADJD,MAAM,4BAAM,GAAG;IAAC,MAAM;IAAE,SAAS;IAAE,UAAU;IAAE,UAAU;CAAC;AAC3C,kDAAkB,aAAa,EAAE,MAAM,GAAG,EAAE,EAAC;IAC1D,MAAM,eAAE,WAAW,CAAA,aAAE,SAAS,CAAA,aAAE,SAAS,CAAA,cAAE,UAAU,CAAA,EAAE,GAAG,MAAM;IAChE,MAAM,SAAS,GAAG,CAAA,GAAA,aAAM,CAAA,EAAE;IAC1B,MAAM,CAAC,MAAM,CAAC,SAAS,EAAE;mBAAE,SAAS;mBAAE,SAAS;oBAAE,UAAU;KAAE,CAAC;IAC9D,MAAM,WAAW,GAAG,CAAA,GAAA,wCAAc,CAAA,EAAE;IACpC,MAAM,GAAG,GAAG,CAAA,GAAA,cAAO,CAAA,CAAC,IAAO,CAAA,EAAE,CAAA,AAAC,EAAE;QAAC,aAAa;QAAE,WAAW;KAAC,CAAC;IAE7D,GAAG,CAAC,IAAI,GAAG,CAAA,GAAA,kBAAW,CAAA,CACpB,CAAI,GAAA,IAAI,GAAK;QACX,IAAI,GAAG,CAAC,OAAO,EAAE,MAAM,IAAI,KAAK,CAAC,CAAC,iBAAiB,CAAC,CAAC,CAAA;QACrD,MAAM,QAAQ,GAAG,CAAA,KAAK,GAAI;YACxB,GAAG,CAAC,KAAK,GAAG,4BAAM,CAAC,KAAK,CAAC;YACzB,4BAAM,CAAC,OAAO,CAAC,CAAC,IAAI,EAAE,KAAK,GAAK;gBAC9B,GAAG,CAAC,IAAI,CAAC,GAAG,KAAK,KAAK,KAAK;aAC5B,CAAC;YACF,WAAW,EAAE;SACd;QACD,GAAG,CAAC,OAAO,GAAG,IAAI,OAAO,CAAC,CAAC,OAAO,EAAE,MAAM,GAAK;YAC7C,aAAa,IAAI,IAAI,CAAC,CAAC,IAAI,CAAC,OAAO,EAAE,MAAM,CAAC;SAC7C,CAAC,CAAC,IAAI,CACL,OAAM,MAAM,GAAI;YACd,OAAO,GAAG,CAAC,OAAO;YAClB,GAAG,CAAC,MAAM,GAAG,MAAM;YACnB,QAAQ,CAAC,CAAC,CAAC;YACX,IAAI,SAAS,CAAC,SAAS,EAAE,MAAM,SAAS,CAAC,SAAS,CAAC,MAAM,CAAC;YAC1D,OAAO,MAAM,CAAA;SACd,EACD,OAAM,KAAK,GAAI;YACb,OAAO,GAAG,CAAC,OAAO;YAClB,GAAG,CAAC,KAAK,GAAG,KAAK;YACjB,IAAI,SAAS,CAAC,SAAS,EAAE,MAAM,SAAS,CAAC,SAAS,CAAC,KAAK,CAAC;YACzD,QAAQ,CAAC,CAAC,CAAC;YACX,OAAO,KAAK,CAAA;SACb,CACF,CAAC,IAAI,CAAC,OAAM,MAAM,GAAI;YACrB,IAAI,SAAS,CAAC,UAAU,EAAE,MAAM,SAAS,CAAC,UAAU,CAAC,MAAM,CAAC;SAC7D,CAAC;QACF,QAAQ,CAAC,CAAC,CAAC;QACX,OAAO,GAAG,CAAC,OAAO,CAAA;KACnB,EACD;QAAC,GAAG;KAAC,CACN;IAED,CAAA,GAAA,gBAAS,CAAA,CACP,IAAM;QAAE,IAAI,WAAW,IAAI,GAAG,CAAC,IAAI,EAAE,GAAG,CAAC,IAAI,EAAE;KAAE,EACjD;QAAC,GAAG;KAAC,CACN;IAED,OAAO,GAAG,CAAA;CACX;;;AEtDD,MAAM,0BAAI,GAAG,CAAA,EAAE,GAAI,IAAI,OAAO,CAAC,CAAA,OAAO,GAAI;QACxC,UAAU,CAAC,IAAM;YAAE,OAAO,EAAE;SAAE,EAAE,EAAE,CAAC;KACpC,CAAC;IACF,wCAAmB,GAAJ,0BAAI;;;AHGZ,eAAe,yCAAU,CAAC,IAAI,EAAE,OAAO,GAAG,EAAE,EAAC;IAClD,MAAM,IAAI,GAAG,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC;IACpC,MAAM,MAAM,GAAG,IAAI,KAAK,IAAI,GAAG,EAAE,GAC/B,GAAG,GAAG,IAAI,eAAe,CAAC;QAAE,CAAC,EAAE,IAAI;KAAE,CAAC;IACxC,OAAO,MAAM,8BAAQ,CAAC,KAAK,EAAE,CAAC,KAAK,EAAE,IAAI,CAAC,EAAE,MAAM,CAAC,CAAC,CAAC,CAAA;CACtD;AAEM,eAAe,yCAAY,CAAC,IAAI,EAAE,OAAO,EAAC;IAC/C,OAAO,MAAM,8BAAQ,CAAC,MAAM,EAAE,CAAC,KAAK,EAAE,IAAI,CAAC,CAAC,EAAE,OAAO,CAAC,CAAA;CACvD;AACD,IAAI,CACJ,cAAM,CAAC,KAAK,GAAG;IACb,KAAK,EAAE,yCAAU;IACjB,OAAO,EAAE,yCAAY;CACtB;AAED,eAAe,8BAAQ,CAAC,MAAM,EAAE,IAAI,EAAE,IAAI,EAAE,KAAK,GAAG,CAAC,EAAC;IACpD,MAAM,GAAG,GAAG,MAAM,KAAK,CAAC,IAAI,EAAE;gBAC5B,MAAM;QACN,OAAO,EAAE;YACP,SAAS,EAAE,kBAAkB;YAC7B,cAAc,EAAE,kBAAkB;SACnC;QACD,IAAI,EAAE,IAAI,GAAG,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,GAAG,SAAS;KAC9C,CAAC;IACF,IAAI,GAAG,CAAC,MAAM,KAAK,GAAG,EACpB,MAAM,IAAI,KAAK,CAAC,CAAC,uCAAuC,CAAC,CAAC,CAAA;IAE5D,IAAI,GAAG,CAAC,MAAM,KAAK,GAAG,IAAI,KAAK,GAAG,CAAC,EAAE;QACnC,MAAM,CAAA,GAAA,wCAAI,CAAA,CAAC,GAAG,CAAC;QACf,OAAO,8BAAQ,CAAC,MAAM,EAAE,IAAI,EAAE,IAAI,EAAE,KAAK,GAAG,CAAC,CAAC,CAAA;KAC/C;IACD,MAAM,UAAE,MAAM,CAAA,SAAE,KAAK,CAAA,EAAE,GAAG,MAAM,GAAG,CAAC,IAAI,EAAE;IAC1C,IAAI,KAAK,EAAE,MAAM,IAAI,KAAK,CAAC,KAAK,CAAC,OAAO,CAAC,CAAA;IACzC,OAAO,MAAM,IAAI,IAAI,CAAA;CACtB;AAEM,SAAS,yCAAQ,CAAC,IAAI,EAAE,OAAO,GAAG,EAAE,EAAE,MAAM,EAAC;IAClD,MAAM,MAAM,GAAG,IAAI,GAAG;QAAC,IAAI;QAAE,OAAO;KAAC,GAAG,IAAI;IAC5C,MAAM,EAAE,IAAI,EAAE,MAAM,CAAA,SAAE,KAAK,CAAA,UAAE,MAAM,CAAA,EAAE,GAAG,CAAA,GAAA,UAAM,CAAA,CAAC,MAAM,EAAE;QACrD,GAAG,MAAM;QACT,OAAO,EAAE,yCAAU;KACpB,CAAC;IACF,MAAM,OAAO,GAAG,OAAO,MAAM,KAAK,WAAW,IAAI,CAAC,KAAK;IACvD,MAAM,MAAM,GAAG,CAAA,GAAA,kBAAW,CAAA,CAAC,IAAM;QAAE,MAAM,EAAE;KAAE,EAAE;QAAC,MAAM;KAAC,CAAC;IACxD,OAAO;gBAAE,MAAM;iBAAE,OAAO;eAAE,KAAK;gBAAE,MAAM;gBAAE,MAAM;KAAE,CAAA;CAClD;AAEM,SAAS,yCAAU,CAAC,IAAI,EAAE,MAAM,EAAC;IACtC,OAAO,CAAA,GAAA,wCAAQ,CAAA,CACb,CAAA,OAAO,GAAI,yCAAY,CAAC,IAAI,EAAE,OAAO,CAAC,EACtC,MAAM,CACP,CAAA;CACF;AAEM,SAAS,yCAAiB,CAAC,IAAI,EAAE,OAAO,EAAE,MAAM,EAAC;IACtD,MAAM,OAAO,GAAG,yCAAU,CAAC,IAAI,EAAE,MAAM,CAAC;IACxC,CAAA,GAAA,gBAAS,CAAA,CACP,IAAM;QAAE,IAAI,OAAO,CAAC,IAAI,EAAE,OAAO,CAAC,IAAI,CAAC,OAAO,CAAC;KAAE,EACjD;QAAC,IAAI;QAAE,OAAO;KAAC,CAChB;IACD,OAAO,OAAO,CAAA;CACf;;;ADjEM,SAAS,yCAAc,GAAE;IAC9B,MAAM,EAAE,MAAM,EAAE,WAAW,CAAA,WAAE,OAAO,CAAA,SAAE,KAAK,CAAA,UAAE,MAAM,CAAA,EAAE,GAAG,CAAA,GAAA,yCAAQ,CAAA,CAAC,qBAAqB,CAAC;IACvF,MAAM,MAAM,GAAG,CAAA,GAAA,kBAAW,CAAA,CAAC,IAAM;QAAE,MAAM,EAAE;KAAE,EAAE;QAAC,MAAM;KAAC,CAAC;IACxD,OAAO;qBAAE,WAAW;iBAAE,OAAO;eAAE,KAAK;gBAAE,MAAM;gBAAE,MAAM;KAAE,CAAA;CACvD;AAEM,SAAS,yCAAW,GAAE;IAC3B,OAAO,EAAE,CAAA;CACV;AAEM,SAAS,yCAAqB,GAAE;AACrC,iCAAiC;AACjC,aAAa;AACb,YAAY;AACZ,0BAA0B;AAC1B,6CAA6C;AAC7C,oCAAoC;AACpC,uDAAuD;AACvD,uCAAuC;AACvC,QAAQ;AACR,OAAO;AACP,MAAM;AACN,gBAAgB;AAChB,eAAe;AACf,mBAAmB;AACnB,yBAAyB;AACzB,2BAA2B;AAC3B,MAAM;AACN,IAAI;CACL;AAEM,SAAS,yCAAwB,GAAE,EAEzC;AAEM,SAAS,yCAA8B,CAAC,MAAM,EAAE,SAAS,GAAG,EAAE,EAAC;IACpE,MAAM,UAAE,MAAM,CAAA,EAAE,GAAG,yCAAc,EAAE;IACnC,OAAO,CAAA,GAAA,yCAAU,CAAA,CAAC,MAAM,EAAE;QACxB,GAAG,SAAS;QACZ,SAAS,EAAC,WAAW,EAAC;YACpB,MAAM,CAAC,WAAW,CAAC;YACnB,IAAI,SAAS,CAAC,SAAS,EAAE,SAAS,CAAC,SAAS,CAAC,WAAW,CAAC;SAC1D;KACF,CAAC,CAAA;CACH;AAEM,MAAM,yCAAQ,GAAG,CAAA,SAAS,GAC/B,yCAA8B,CAAC,YAAY,EAAE,SAAS,CAAC;AAElD,MAAM,yCAAS,GAAG,CAAA,SAAS,GAChC,yCAA8B,CAAC,aAAa,EAAE,SAAS,CAAC;AAEnD,MAAM,yCAAS,GAAG,CAAA,SAAS,GAChC,yCAA8B,CAAC,aAAa,EAAE,SAAS,CAAC;;;;;;;;AKxD1D;;;AAGA,MAAM,kCAAY,GAAG,CAAC,SAAC,KAAK,CAAA,EAAE,GAAG,KAAK,EAAC,GAAK;IAC1C,IAAI,CAAC,KAAK,EAAE,OAAO,IAAI,CAAA;IACvB,qBAAO,gBAAC,CAAA,GAAA,uBAAK,CAAA;QAAC,QAAQ,EAAC,OAAO;QAAE,GAAG,KAAK;kBAAG,KAAK,CAAC,OAAO;MAAS,CAAA;CAClE;IAED,wCAA2B,GAAZ,kCAAY;;;;;;;;ACR3B;;;;AAIA,MAAM,0BAAI,iBAAG,iBAAgB,CAAC,CAAC,EAAC,GAAG,KAAK,EAAC,EAAE,GAAG,GAAK;IACjD,KAAK,CAAC,SAAS,GAAG,GAAG;IACrB,IAAI,KAAK,CAAC,EAAE,EACV,KAAK,CAAC,SAAS,GAAG,CAAA,GAAA,WAAU,CAAA;IAE9B,IAAI,KAAK,CAAC,EAAE,IAAI,KAAK,CAAC,EAAE,CAAC,UAAU,CAAC,MAAM,CAAC,EAAC;QAC1C,KAAK,CAAC,IAAI,GAAG,KAAK,CAAC,EAAE;QACrB,OAAO,KAAK,CAAC,EAAE;QACf,KAAK,CAAC,GAAG,GAAG,KAAK,CAAC,GAAG,IAAI,qBAAqB;QAC9C,KAAK,CAAC,MAAM,GAAG,KAAK,CAAC,MAAM,IAAI,QAAQ;QACvC,KAAK,CAAC,SAAS,GAAG,GAAG;KACtB;IACD,qBAAO,gBAAC,CAAA,GAAA,sBAAO,CAAA;QAAE,GAAG,KAAK;QAAE,GAAG,EAAE,GAAG;MAAG,CAAA;CACvC,CAAC;AAEF,0BAAI,CAAC,WAAW,GAAG,MAAM;IAEzB,wCAAmB,GAAJ,0BAAI;;;;;;;;ACrBnB;;;;;;;;;;;AAYe,kDAAmB,KAAK,EAAC;IACtC,iCAAiC;IACjC,2CAA2C;IAC3C,4CAA4C;IAC5C,MAAM,CAAC,KAAK,EAAE,QAAQ,CAAC,GAAG,CAAA,GAAA,eAAQ,CAAA,CAAC,EAAE,CAAC;IACtC,MAAM,CAAC,QAAQ,EAAE,WAAW,CAAC,GAAG,CAAA,GAAA,eAAQ,CAAA,CAAC,EAAE,CAAC;IAC5C,MAAM,CAAC,KAAK,EAAE,QAAQ,CAAC,GAAG,CAAA,GAAA,eAAQ,CAAA,CAAC,IAAI,CAAC;IAExC,MAAM,KAAK,GAAG,CAAA,GAAA,yCAAQ,CAAA,CAAC;QACrB,SAAS,IAAE;QACT,iBAAiB;QACjB,+BAA+B;SAChC;QACD,SAAS,EAAC,KAAK,EAAC;YACd,IAAI,CAAC,EAAE,KAAK,CAAC,CAAC,CAAC,QAAQ,CAAC,8BAA8B,CAAC,EACrD,QAAQ,CAAC;gBAAC,OAAO,EAAE,8BAA8B;aAAC,CAAC;iBAEnD,QAAQ,CAAC,KAAK,CAAC;QAEjB,uBAAuB;QACvB,WAAW;SACZ;KACF,CAAC;IAEF,MAAM,QAAQ,GAAG,CAAA,KAAK,GAAI;QACxB,KAAK,CAAC,cAAc,EAAE;QACtB,QAAQ,CAAC,IAAI,CAAC;QACd,KAAK,CAAC,IAAI,CAAC;mBAAE,KAAK;sBAAE,QAAQ;SAAE,CAAC;KAChC;IAED,MAAM,aAAa,GAAG,CAAA,KAAK,GAAI;QAC7B,IAAI,KAAK,CAAC,GAAG,KAAK,OAAO,EAAE,QAAQ,CAAC,KAAK,CAAC;KAC3C;IACD,MAAM,WAAW,GAAI,KAAK,IAAI,QAAQ,AAAC;IAEvC,MAAM,QAAQ,GAAG,CAAC,CAAC,KAAK,CAAC,OAAO;IAChC,qBAAO,iBAAC,CAAA,GAAA,qBAAG,CAAA;QAAE,GAAG,KAAK;;0BACnB,gBAAC,CAAA,GAAA,4BAAU,CAAA;gBAAC,OAAO,EAAC,IAAI;0BAAC,OAAK;cAAa;0BAC3C,iBAAC,CAAA,GAAA,qBAAG,CAAA;gBACF,SAAS,EAAE,MAAM;0BACjB,QAAQ;;kCAER,gBAAC,CAAA,GAAA,wCAAY,CAAA;wBAAC,KAAK,EAAE,KAAK;sBAAG;kCAC7B,gBAAC,CAAA,GAAA,2BAAS,CAAA;wBACR,SAAS;wBACT,KAAK,EAAC,OAAO;wBACb,YAAY,EAAC,OAAO;wBACpB,QAAQ,EAAE,QAAQ;wBAClB,MAAM,EAAC,QAAQ;wBACf,SAAS;wBACT,IAAI,EAAC,OAAO;wBACZ,IAAI,EAAC,OAAO;wBACZ,KAAK,EAAE,KAAK;wBACZ,QAAQ,EAAE,CAAA,CAAC,GAAI;4BAAE,QAAQ,CAAC,CAAC,CAAC,MAAM,CAAC,KAAK,CAAC;yBAAE;sBAC3C;kCACF,gBAAC,CAAA,GAAA,2BAAS,CAAA;wBACR,KAAK,EAAC,UAAU;wBAChB,YAAY,EAAC,OAAO;wBACpB,QAAQ,EAAE,QAAQ;wBAClB,MAAM,EAAC,QAAQ;wBACf,SAAS;wBACT,IAAI,EAAC,UAAU;wBACf,IAAI,EAAC,UAAU;wBACf,KAAK,EAAE,QAAQ;wBACf,QAAQ,EAAE,CAAA,CAAC,GAAI;4BAAE,WAAW,CAAC,CAAC,CAAC,MAAM,CAAC,KAAK,CAAC;yBAAE;sBAC9C;kCAEF,iBAAC,CAAA,GAAA,uBAAK,CAAA;wBAAC,OAAO,EAAE,CAAC;wBAAE,SAAS,EAAC,aAAa;wBAAC,UAAU,EAAC,QAAQ;wBAAC,EAAE,EAAE,CAAC;;0CAClE,gBAAC,CAAA,GAAA,wBAAM,CAAA;gCACL,IAAI,EAAC,QAAQ;gCACb,OAAO,EAAC,WAAW;gCACnB,QAAQ,EAAE,QAAQ,IAAI,CAAC,WAAW;0CACnC,OAAK;8BAAS;0CACf,gBAAC,CAAA,GAAA,wBAAM,CAAA;gCACL,OAAO,EAAC,UAAU;gCAClB,EAAE,EAAC,kBAAkB;gCACrB,SAAS,EAAE,CAAA,GAAA,wCAAI,CAAA;0CAChB,iBAAe;8BAAS;0CACzB,gBAAC,CAAA,GAAA,wCAAI,CAAA;gCAAC,OAAO,EAAC,MAAM;gCAAC,EAAE,EAAC,GAAG;0CAAC,MAAI;8BAAO;;sBACjC;;cACJ;;MACF,CAAA;CACP;;;;;;;;AC9FD;;;;;;;;;;;AAae,kDAAoB,aACjC,SAAS,CAAA,aACT,SAAS,CAAA,EACT,GAAG,KAAK,EACT,EAAC;IACA,MAAM,CAAC,KAAK,EAAE,QAAQ,CAAC,GAAG,CAAA,GAAA,eAAQ,CAAA,CAAC,EAAE,CAAC;IACtC,MAAM,CAAC,QAAQ,EAAE,WAAW,CAAC,GAAG,CAAA,GAAA,eAAQ,CAAA,CAAC,EAAE,CAAC;IAE5C,MAAM,MAAM,GAAG,CAAA,GAAA,yCAAS,CAAA,CAAC;mBACvB,SAAS;mBACT,SAAS;KACV,CAAC;IAEF,MAAM,QAAQ,GAAG,CAAA,KAAK,GAAI;QACxB,KAAK,CAAC,cAAc,EAAE;QACtB,MAAM,CAAC,IAAI,CAAC;YACV,KAAK,EAAE,KAAK,IAAI,SAAS;YACzB,QAAQ,EAAE,QAAQ,IAAI,SAAS;SAChC,CAAC;KACH;IAED,MAAM,QAAQ,GAAG,CAAC,CAAC,MAAM,CAAC,OAAO;IACjC,gEAAgE;IAChE,8DAA8D;IAC9D,MAAM,WAAW,GAAG,CAAC,CAAE,CAAA,KAAK,IAAI,QAAQ,CAAA,AAAC;IACzC,qBAAO,iBAAC,CAAA,GAAA,uBAAK,CAAA;QACX,GAAG,KAAK;QACR,EAAE,EAAE;YACF,GAAG,KAAK,CAAC,EAAE;YACX,QAAQ,EAAE,CAAC,iBAAiB,CAAC;SAC9B;;0BAED,gBAAC,CAAA,GAAA,4BAAU,CAAA;gBAAC,OAAO,EAAC,IAAI;gBAAC,EAAE,EAAE,CAAC;0BAAE,QAAM;cAAa;0BACnD,iBAAC,CAAA,GAAA,qBAAG,CAAA;gBACF,SAAS,EAAE,MAAM;0BACjB,QAAQ;;kCAER,gBAAC,CAAA,GAAA,wCAAY,CAAA;wBAAC,KAAK,EAAE,MAAM,CAAC,KAAK;sBAAG;kCACpC,gBAAC,CAAA,GAAA,2BAAS,CAAA;wBACR,KAAK,EAAC,OAAO;wBACb,YAAY,EAAC,OAAO;wBACpB,QAAQ,EAAE,QAAQ;wBAClB,MAAM,EAAC,QAAQ;wBACf,SAAS;wBACT,IAAI,EAAC,OAAO;wBACZ,IAAI,EAAC,OAAO;wBACZ,KAAK,EAAE,KAAK;wBACZ,QAAQ,EAAE,CAAA,CAAC,GAAI;4BAAE,QAAQ,CAAC,CAAC,CAAC,MAAM,CAAC,KAAK,CAAC;yBAAE;sBAC3C;kCACF,gBAAC,CAAA,GAAA,2BAAS,CAAA;wBACR,KAAK,EAAC,UAAU;wBAChB,YAAY,EAAC,OAAO;wBACpB,QAAQ,EAAE,QAAQ;wBAClB,MAAM,EAAC,QAAQ;wBACf,SAAS;wBACT,IAAI,EAAC,UAAU;wBACf,IAAI,EAAC,UAAU;wBACf,KAAK,EAAE,QAAQ;wBACf,QAAQ,EAAE,CAAA,CAAC,GAAI;4BAAE,WAAW,CAAC,CAAC,CAAC,MAAM,CAAC,KAAK,CAAC;yBAAE;sBAC9C;kCACF,iBAAC,CAAA,GAAA,uBAAK,CAAA;wBAAC,OAAO,EAAE,CAAC;wBAAE,SAAS,EAAC,aAAa;wBAAC,UAAU,EAAC,QAAQ;wBAAC,EAAE,EAAE,CAAC;;0CAClE,gBAAC,CAAA,GAAA,wBAAM,CAAA;gCACL,QAAQ,EAAE,QAAQ,IAAI,CAAC,WAAW;gCAClC,IAAI,EAAC,QAAQ;gCACb,OAAO,EAAC,WAAW;gCACnB,IAAI,EAAC,OAAO;0CACb,QAAM;8BAAS;0CAChB,gBAAC,CAAA,GAAA,wCAAI,CAAA;gCAAC,OAAO,EAAC,MAAM;gCAAC,EAAE,EAAC,SAAS;0CAAC,MAAI;8BAAO;;sBACvC;;cACJ;;MAEA,CAAA;CACT;;;AVlED,MAAM,yCAAmB,GAAG,CAAA,GAAA,cAAM,CAAA,CAAC,CAAA,GAAG,GAAK,CAAA;QACzC,WAAW,EAAE,GAAG;QAChB,cAAc,EAAC,WAAW,EAAC;YACzB,GAAG,CAAC;6BAAE,WAAW;aAAE,CAAC;SACrB;KACF,CAAA,AAAC,CAAC;AAEH,SAAS,mDAA6B,CAAC,IAAI,GAAG,EAAE,EAAE;IAChD,MAAM,eAAE,WAAW,CAAA,kBAAE,cAAc,CAAA,EAAE,GAAG,yCAAmB,EAAE;IAC7D,CAAA,GAAA,gBAAS,CAAA,CACP,IAAM;QACJ,cAAc,CAAC,QAAQ,CAAC,QAAQ,EAAE,CAAC,KAAK,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC;KAC9D,EACD,IAAI,CACL;IACD,OAAO,WAAW,CAAA;CACnB;AAEc,kDAAkB,aAAE,SAAS,CAAA,EAAE,EAAE;IAC9C,MAAM,SAAS,GAAG,SAAS;IAC3B,qBAAO,gBAAC,CAAA,GAAA,2BAAS,CAAA;QACf,EAAE,EAAE;YACF,SAAS,EAAE,OAAO;YAClB,KAAK,EAAE,OAAO;YACd,OAAO,EAAE,MAAM;SAChB;kBAED,cAAA,gBAAC,CAAA,GAAA,2BAAS,CAAA;YACR,QAAQ,EAAC,IAAI;YACb,EAAE,EAAE;gBACF,OAAO,EAAE,MAAM;gBACf,UAAU,EAAE,QAAQ;gBACpB,cAAc,EAAE,QAAQ;aACzB;sBAED,cAAA,gBAAC,SAAS,KAAG;UACH;MACF,CAAA;CACb;AAED,wCAAQ,CAAC,MAAM,GAAG,CAAA,KAAK,GAAI;IACzB,OAAO,KAAK,CAAC,WAAW,iBACtB;;0BACE,gBAAC,CAAA,GAAA,YAAK,CAAA;gBAAC,IAAI,EAAC,QAAQ;gBAAC,OAAO,gBAAE,gBAAC,yCAA0B,KAAE;cAAI;0BAC/D,gBAAC,CAAA,GAAA,YAAK,CAAA;gBAAC,IAAI,EAAC,YAAY;gBAAC,OAAO,gBAAE,gBAAC,yCAA0B,KAAE;cAAI;0BACnE,gBAAC,CAAA,GAAA,YAAK,CAAA;gBAAC,IAAI,EAAC,kBAAkB;gBAAC,OAAO,gBAAE,gBAAC,yCAA0B,KAAE;cAAI;0BACzE,gBAAC,CAAA,GAAA,YAAK,CAAA;gBAAC,IAAI,EAAC,SAAS;gBAAC,OAAO,gBAAE,gBAAC,yCAA0B,KAAE;cAAI;0BAChE,gBAAC,CAAA,GAAA,YAAK,CAAA;gBAAC,IAAI,EAAC,kBAAkB;gBAAC,OAAO,gBAAE,gBAAC,yCAA0B,KAAE;cAAI;0BACzE,gBAAC,CAAA,GAAA,YAAK,CAAA;gBAAC,IAAI,EAAC,gBAAgB;gBAAC,OAAO,gBAAE,gBAAC,yCAA0B,KAAE;cAAI;;MACtE,iBACH;;0BACE,gBAAC,CAAA,GAAA,YAAK,CAAA;gBAAC,IAAI,EAAC,QAAQ;gBAAC,OAAO,gBAAE,gBAAC,wCAAQ;oBAAC,SAAS,EAAE,2BAAK;kBAAI;cAAI;0BAChE,gBAAC,CAAA,GAAA,YAAK,CAAA;gBAAC,IAAI,EAAC,YAAY;gBAAC,OAAO,gBAAE,gBAAC,wCAAQ;oBAAC,SAAS,EAAE,8BAAQ;kBAAI;cAAI;0BACvE,gBAAC,CAAA,GAAA,YAAK,CAAA;gBAAC,IAAI,EAAC,kBAAkB;gBAAC,OAAO,gBAAE,gBAAC,wCAAQ;oBAAC,SAAS,EAAE,oCAAc;kBAAI;cAAI;0BACnF,gBAAC,CAAA,GAAA,YAAK,CAAA;gBAAC,IAAI,EAAC,SAAS;gBAAC,OAAO,gBAAE,gBAAC,wCAAQ;oBAAC,SAAS,EAAE,4BAAM;kBAAI;cAAI;0BAClE,gBAAC,CAAA,GAAA,YAAK,CAAA;gBAAC,IAAI,EAAC,kBAAkB;gBAAC,OAAO,gBAAE,gBAAC,wCAAQ;oBAAC,SAAS,EAAE,wCAAkB;kBAAI;cAAI;0BACvF,gBAAC,CAAA,GAAA,YAAK,CAAA;gBAAC,IAAI,EAAC,gBAAgB;gBAAC,OAAO,gBAAE,gBAAC,wCAAQ;oBAAC,SAAS,EAAE,sCAAgB;kBAAI;cAAI;0BACnF,gBAAC,CAAA,GAAA,YAAK,CAAA;gBAAC,IAAI,EAAC,GAAG;gBAAC,OAAO,gBAAE,gBAAC,wCAAQ;oBAAC,SAAS,EAAE,0BAAI;kBAAI;cAAI;;MACzD,CAAA;CACN;AAEM,SAAS,yCAA0B,GAAG;IAC3C,MAAM,eAAC,WAAW,CAAA,EAAC,GAAG,yCAAmB,EAAE;IAC3C,qBAAO,gBAAC,CAAA,GAAA,wCAAY,CAAA;QAAC,EAAE,EAAE,WAAW,IAAI,GAAG;MAAG,CAAA;CAC/C;AAED,SAAS,0BAAI,GAAE;IACb,MAAM,WAAW,GAAG,mDAA6B,EAAE;IACnD,MAAM,KAAK,GAAG,AAAC,WAAW,IAAI,WAAW,KAAK,GAAG,GAC7C,GAAG,GAAG,IAAI,eAAe,CAAC;QAAE,CAAC,EAAE,WAAW;KAAE,CAAC,GAC7C,EAAE;IACN,qBAAO,iBAAC,CAAA,GAAA,uBAAK,CAAA;QACX,OAAO,gBAAE,gBAAC,CAAA,GAAA,yBAAO,CAAA;YAAC,EAAE,EAAE;gBAAC,EAAE,EAAE,CAAC;aAAC;sBAAE,IAAE;UAAU;;0BAU3C,gBAAC,CAAA,GAAA,wBAAM,CAAA;gBACL,OAAO,EAAC,WAAW;gBACnB,SAAS,EAAE,CAAA,GAAA,wCAAI,CAAA;gBACf,EAAE,EAAE,CAAC,MAAM,EAAE,KAAK,CAAC,CAAC;0BACrB,OAAK;cAAS;0BAEf,gBAAC,CAAA,GAAA,wBAAM,CAAA;gBACL,OAAO,EAAC,WAAW;gBACnB,EAAE,EAAE,CAAC,OAAO,EAAE,KAAK,CAAC,CAAC;gBACrB,SAAS,EAAE,CAAA,GAAA,wCAAI,CAAA;0BAChB,QAAM;cAAS;;MACV,CAAA;CACT;AAED,SAAS,2BAAK,GAAE;IACd,qBAAO,gBAAC,CAAA,GAAA,uBAAK,CAAA;kBACX,cAAA,gBAAC,CAAA,GAAA,wCAAS,CAAA;YAAC,EAAE,EAAE;gBAAC,CAAC,EAAC,CAAC;aAAC;UAAG;MACjB,CAAA;CACT;AAED,SAAS,8BAAQ,GAAE;IACjB,MAAM,QAAQ,GAAG,CAAA,GAAA,kBAAW,CAAA,EAAE;IAE9B,qBAAO,gBAAC,CAAA,GAAA,uBAAK,CAAA;QAAC,EAAE,EAAE;YAAC,CAAC,EAAC,CAAC;SAAC;kBACrB,cAAA,gBAAC,CAAA,GAAA,4BAAU,CAAA;YAAC,OAAO,EAAC,IAAI;sBAAC,2BAAyB;UAAa;MAEzD,CAAA;CACT;AAED,SAAS,4BAAM,GAAE;IACf,MAAM,MAAM,GAAG,CAAA,GAAA,yCAAS,CAAA,EAAE;IAC1B,MAAM,SAAS,GAAG,IAAM;QACtB,MAAM,CAAC,IAAI,CAAC,EAAE,CAAC;KAChB;IACD,qBAAO,iBAAC,CAAA,GAAA,qBAAG,CAAA;;0BACT,gBAAC,CAAA,GAAA,4BAAU,CAAA;gBAAC,OAAO,EAAC,IAAI;gBAAC,EAAE,EAAE,CAAC;0BAAE,QAAM;cAAa;0BACnD,iBAAC,CAAA,GAAA,uBAAK,CAAA;gBAAC,OAAO,EAAE,CAAC;;kCACf,gBAAC,CAAA,GAAA,wBAAM,CAAA;wBACL,OAAO,EAAC,WAAW;wBACnB,OAAO,EAAE,SAAS;wBAClB,QAAQ,EAAE,MAAM,CAAC,OAAO;kCACzB,cAAY;sBAAS;kCACtB,gBAAC,CAAA,GAAA,wCAAY,CAAA;wBAAC,KAAK,EAAE,MAAM,CAAC,KAAK;sBAAG;kCACpC,gBAAC,CAAA,GAAA,wBAAM,CAAA;wBACL,OAAO,EAAC,WAAW;wBACnB,EAAE,EAAC,kBAAkB;wBACrB,SAAS,EAAE,CAAA,GAAA,wCAAI,CAAA;kCAChB,kBAAgB;sBAAS;kCAC1B,gBAAC,CAAA,GAAA,wBAAM,CAAA;wBACL,OAAO,EAAC,WAAW;wBACnB,EAAE,EAAC,gBAAgB;wBACnB,SAAS,EAAE,CAAA,GAAA,wCAAI,CAAA;kCAChB,eAAa;sBAAS;kCACvB,gBAAC,CAAA,GAAA,wBAAM,CAAA;wBACL,OAAO,EAAC,MAAM;wBACd,EAAE,EAAC,GAAG;wBACN,SAAS,EAAE,CAAA,GAAA,wCAAI,CAAA;wBACf,IAAI,EAAC,OAAO;kCACb,MAAI;sBAAS;;cACR;;MACJ,CAAA;CACP;AAED,SAAS,wCAAkB,GAAE;IAC3B,MAAM,QAAQ,GAAG,CAAA,GAAA,kBAAW,CAAA,EAAE;IAC9B,qBAAO,gBAAC,CAAA,GAAA,wCAAU,CAAA;QAAC,EAAE,EAAE;YAAC,CAAC,EAAC,CAAC;SAAC;MAAG,CAAA;CAChC;AAED,SAAS,sCAAgB,GAAE;IACzB,qBAAO,iBAAC,CAAA,GAAA,qBAAG,CAAA;;0BACT,gBAAC,CAAA,GAAA,4BAAU,CAAA;gBAAC,OAAO,EAAC,IAAI;gBAAC,EAAE,EAAE,CAAC;0BAAE,2BAAyB;cAAa;0BACtE,gBAAC,CAAA,GAAA,4BAAU,CAAA;gBAAC,OAAO,EAAC,OAAO;gBAAC,EAAE,EAAE,CAAC;0BAAE,cAAY;cAAa;0BAC5D,gBAAC,CAAA,GAAA,wCAAI,CAAA;gBAAC,OAAO,EAAC,MAAM;gBAAC,EAAE,EAAC,SAAS;0BAAC,MAAI;cAAO;;MACzC,CAAA;CACP;AAED,SAAS,oCAAc,GAAE;IACvB,qBAAO,gBAAC,KAAG;kBAAC,0BAAwB;MAAM,CAAA;CAC3C","sources":["client-src/pages/AuthPage.js","client-src/pages/RedirectPage.js","client-src/hooks/auth.js","client-src/hooks/cqrpc.js","client-src/hooks/useAsync.js","client-src/hooks/useForceUpdate.js","shared/wait.js","client-src/components/ErrorMessage.js","client-src/components/Link.js","client-src/components/LoginForm.js","client-src/components/SignupForm.js"],"sourcesContent":["import { useEffect } from 'react'\nimport { Routes, Route, useNavigate, useSearchParams } from 'react-router-dom'\nimport create from 'zustand'\n\nimport Container from '@mui/material/Container'\nimport Paper from '@mui/material/Paper'\nimport Typography from '@mui/material/Typography'\nimport Stack from '@mui/material/Stack'\nimport Button from '@mui/material/Button'\nimport Divider from '@mui/material/Divider'\nimport Box from '@mui/material/Box'\n\nimport RedirectPage from './RedirectPage'\nimport { useSignup } from '../hooks/auth'\nimport ErrorMessage from '../components/ErrorMessage'\nimport Link from '../components/Link'\nimport LoginForm from '../components/LoginForm'\nimport SignupForm from '../components/SignupForm'\n\nconst useLoginDestination = create(set => ({\n  destination: '/',\n  setDestination(destination){\n    set({ destination })\n  }\n}))\n\nfunction useSetLoginDestinationOnMount(args = []) {\n  const { destination, setDestination } = useLoginDestination()\n  useEffect(\n    () => {\n      setDestination(location.toString().split(location.origin)[1])\n    },\n    args\n  )\n  return destination\n}\n\nexport default function AuthPage({ component }) {\n  const Component = component\n  return <Container\n    sx={{\n      minHeight: '100vh',\n      width: '100vw',\n      display: 'flex',\n    }}\n  >\n    <Container\n      maxWidth=\"sm\"\n      sx={{\n        display: 'flex',\n        alignItems: 'center',\n        justifyContent: 'center',\n      }}\n    >\n      <Component />\n    </Container>\n  </Container>\n}\n\nAuthPage.routes = props => {\n  return props.currentUser ?\n    <>\n      <Route path=\"/login\" element={<RedirectToLoginDestination/>} />\n      <Route path=\"/login/eth\" element={<RedirectToLoginDestination/>} />\n      <Route path=\"/forgot-password\" element={<RedirectToLoginDestination/>} />\n      <Route path=\"/signup\" element={<RedirectToLoginDestination/>} />\n      <Route path=\"/signup/password\" element={<RedirectToLoginDestination/>} />\n      <Route path=\"/signup/wallet\" element={<RedirectToLoginDestination/>} />\n    </> :\n    <>\n      <Route path=\"/login\" element={<AuthPage component={Login} />} />\n      <Route path=\"/login/eth\" element={<AuthPage component={LoginEth} />} />\n      <Route path=\"/forgot-password\" element={<AuthPage component={ForgotPassword} />} />\n      <Route path=\"/signup\" element={<AuthPage component={Signup} />} />\n      <Route path=\"/signup/password\" element={<AuthPage component={SignupWithPassword} />} />\n      <Route path=\"/signup/wallet\" element={<AuthPage component={SignupWithWallet} />} />\n      <Route path=\"*\" element={<AuthPage component={Main} />} />\n    </>\n}\n\nexport function RedirectToLoginDestination() {\n  const {destination} = useLoginDestination()\n  return <RedirectPage to={destination || '/'}/>\n}\n\nfunction Main(){\n  const destination = useSetLoginDestinationOnMount()\n  const query = (destination && destination !== '/')\n    ? '?' + new URLSearchParams({ d: destination })\n    : ''\n  return <Stack\n    divider={<Divider sx={{my: 3}}>OR</Divider>}\n  >\n    {/* {window.ethereum &&\n      <Button\n        variant=\"contained\"\n        to=\"/login/eth\"\n        query={{ d: destination }}\n        component={Link}\n      >Login with Ethereum</Button>\n    } */}\n    <Button\n      variant=\"contained\"\n      component={Link}\n      to={`/login${query}`}\n    >Login</Button>\n\n    <Button\n      variant=\"contained\"\n      to={`/signup${query}`}\n      component={Link}\n    >Signup</Button>\n  </Stack>\n}\n\nfunction Login(){\n  return <Paper>\n    <LoginForm sx={{p:2}}/>\n  </Paper>\n}\n\nfunction LoginEth(){\n  const navigate = useNavigate()\n\n  return <Paper sx={{p:2}}>\n    <Typography variant=\"h5\">Logging in with Ethereum…</Typography>\n    {/* <LoginWithEthereum _onConnect={() => { navigate('/') }} /> */}\n  </Paper>\n}\n\nfunction Signup(){\n  const signup = useSignup()\n  const justTryIt = () => {\n    signup.call({})\n  }\n  return <Box>\n    <Typography variant=\"h4\" mb={3}>Signup</Typography>\n    <Stack spacing={2}>\n      <Button\n        variant=\"contained\"\n        onClick={justTryIt}\n        disabled={signup.pending}\n      >Just Try It!</Button>\n      <ErrorMessage error={signup.error}/>\n      <Button\n        variant=\"contained\"\n        to=\"/signup/password\"\n        component={Link}\n      >Email & Password</Button>\n      <Button\n        variant=\"contained\"\n        to=\"/signup/wallet\"\n        component={Link}\n      >Crypto Wallet</Button>\n      <Button\n        variant=\"text\"\n        to=\"/\"\n        component={Link}\n        size=\"small\"\n      >back</Button>\n    </Stack>\n  </Box>\n}\n\nfunction SignupWithPassword(){\n  const navigate = useNavigate()\n  return <SignupForm sx={{p:2}}/>\n}\n\nfunction SignupWithWallet(){\n  return <Box>\n    <Typography variant=\"h4\" mb={3}>Signup with crypto wallet</Typography>\n    <Typography variant=\"body1\" mb={3}>coming soon…</Typography>\n    <Link variant=\"text\" to=\"/signup\">back</Link>\n  </Box>\n}\n\nfunction ForgotPassword(){\n  return <div>forgot password form TBD</div>\n}\n\n","import { useEffect } from 'react'\nimport { useNavigate } from 'react-router-dom'\n\nexport default function RedirectPage({ to }) {\n  const navigate = useNavigate()\n  useEffect(() => { navigate(to) }, [])\n  console.log('RedirectPage to', to)\n  return null\n}\n","import { useCallback, useEffect } from 'react'\nimport { useQuery, useCommand } from './cqrpc'\n\nexport function useCurrentUser(){\n  const { result: currentUser, loading, error, mutate } = useQuery('auth.getCurrentUser')\n  const reload = useCallback(() => { mutate() }, [mutate])\n  return { currentUser, loading, error, mutate, reload }\n}\n\nexport function useLoggedIn(){\n  return {}\n}\n\nexport function useRedirectIfLoggedIn(){\n  // const navigate = useNavigate()\n  // useEffect(\n  //   () => {\n  //     if (loading) return\n  //     if (redirectToIfFound && currentUser){\n  //       navigate(redirectToIfFound)\n  //     }else if (redirectToIfNotFound && !currentUser){\n  //       navigate(redirectToIfNotFound)\n  //     }\n  //   },\n  //   [\n  //     navigate,\n  //     loading,\n  //     currentUser,\n  //     redirectToIfFound,\n  //     redirectToIfNotFound\n  //   ]\n  // )\n}\n\nexport function useRedirectIfNotLoggedIn(){\n\n}\n\nexport function useCommandAndReloadCurrentUser(action, callbacks = {}){\n  const { mutate } = useCurrentUser()\n  return useCommand(action, {\n    ...callbacks,\n    onSuccess(currentUser){\n      mutate(currentUser)\n      if (callbacks.onSuccess) callbacks.onSuccess(currentUser)\n    },\n  })\n}\n\nexport const useLogin = callbacks =>\n  useCommandAndReloadCurrentUser('auth.login', callbacks)\n\nexport const useLogout = callbacks =>\n  useCommandAndReloadCurrentUser('auth.logout', callbacks)\n\nexport const useSignup = callbacks =>\n  useCommandAndReloadCurrentUser('auth.signup', callbacks)\n\n","// Command. Query. Remote. Procedure. Call\nimport { useEffect, useCallback } from 'react'\nimport useSWR from 'swr'\nimport useAsync from './useAsync'\nimport wait from '../../shared/wait.js'\n\nexport async function fetchQuery(name, options = {}){\n  const json = JSON.stringify(options)\n  const params = json === '{}' ? '' :\n    '?' + new URLSearchParams({ o: json })\n  return await apiFetch('GET', `/api/${name}${params}`)\n}\n\nexport async function fetchCommand(name, options){\n  return await apiFetch('POST', `/api/${name}`, options)\n}\n/**/\nglobal.cqrpc = {\n  query: fetchQuery,\n  command: fetchCommand,\n}\n\nasync function apiFetch(method, path, body, tries = 0){\n  const res = await fetch(path, {\n    method,\n    headers: {\n      'Accepts': 'application/json',\n      'Content-Type': 'application/json',\n    },\n    body: body ? JSON.stringify(body) : undefined,\n  })\n  if (res.status === 502){\n    throw new Error(`API server looks down or you're offline`)\n  }\n  if (res.status === 504 && tries < 5) {\n    await wait(500)\n    return apiFetch(method, path, body, tries + 1)\n  }\n  const { result, error } = await res.json()\n  if (error) throw new Error(error.message)\n  return result || null\n}\n\nexport function useQuery(name, options = {}, config){\n  const swrKey = name ? [name, options] : null\n  const { data: result, error, mutate } = useSWR(swrKey, {\n    ...config,\n    fetcher: fetchQuery,\n  })\n  const loading = typeof result === 'undefined' && !error\n  const reload = useCallback(() => { mutate() }, [mutate])\n  return { result, loading, error, mutate, reload }\n}\n\nexport function useCommand(name, config){\n  return useAsync(\n    options => fetchCommand(name, options),\n    config\n  )\n}\n\nexport function useCommandOnMount(name, options, config){\n  const command = useCommand(name, config)\n  useEffect(\n    () => { if (command.idle) command.call(options) },\n    [name, options]\n  )\n  return command\n}\n","import * as React from 'react'\nimport { useRef, useMemo, useCallback, useEffect } from 'react'\nimport useForceUpdate from './useForceUpdate'\n\nconst STATES = ['idle', 'pending', 'resolved', 'rejected']\nexport default function useAsync(asyncFunction, config = {}){\n  const { callOnMount, onSuccess, onFailure, onComplete } = config\n  const callbacks = useRef()\n  Object.assign(callbacks, { onSuccess, onFailure, onComplete })\n  const forceUpdate = useForceUpdate()\n  const ctx = useMemo(() => ({}), [asyncFunction, callOnMount])\n\n  ctx.call = useCallback(\n    (...args) => {\n      if (ctx.promise) throw new Error(`already executing`)\n      const setState = state => {\n        ctx.state = STATES[state]\n        STATES.forEach((name, index) => {\n          ctx[name] = index === state\n        })\n        forceUpdate()\n      }\n      ctx.promise = new Promise((resolve, reject) => {\n        asyncFunction(...args).then(resolve, reject)\n      }).then(\n        async result => {\n          delete ctx.promise\n          ctx.result = result\n          setState(2)\n          if (callbacks.onSuccess) await callbacks.onSuccess(result)\n          return result\n        },\n        async error => {\n          delete ctx.promise\n          ctx.error = error\n          if (callbacks.onFailure) await callbacks.onFailure(error)\n          setState(3)\n          return error\n        },\n      ).then(async result => {\n        if (callbacks.onComplete) await callbacks.onComplete(result)\n      })\n      setState(1)\n      return ctx.promise\n    },\n    [ctx]\n  )\n\n  useEffect(\n    () => { if (callOnMount && ctx.idle) ctx.call() },\n    [ctx]\n  )\n\n  return ctx\n}\n","import { useState, useCallback, useEffect } from 'react'\n\nconst noop = () => {}\n\nexport default function useForceUpdate(){\n  let setState = useState()[1]\n  useEffect(() => () => { setState = noop }, [])\n  return useCallback(() => { setState({}) }, [])\n}\n","const wait = ms => new Promise(resolve => {\n  setTimeout(() => { resolve() }, ms)\n})\nexport default wait\n","import * as React from 'react'\nimport Alert from '@mui/material/Alert'\n\nconst ErrorMessage = ({error, ...props}) => {\n  if (!error) return null\n  return <Alert severity=\"error\" {...props}>{error.message}</Alert>\n}\n\nexport default ErrorMessage\n","import * as React from 'react'\nimport { Link as RouterLink } from 'react-router-dom'\nimport MUILink from '@mui/material/Link'\n\nconst Link = React.forwardRef(({...props}, ref) => {\n  props.component = 'a'\n  if (props.to){\n    props.component = RouterLink\n  }\n  if (props.to && props.to.startsWith('http')){\n    props.href = props.to\n    delete props.to\n    props.rel = props.rel || \"noopener noreferrer\"\n    props.target = props.target || \"_blank\"\n    props.component = 'a'\n  }\n  return <MUILink {...props} ref={ref}/>\n})\n\nLink.displayName = 'Link'\n\nexport default Link\n","import { useState } from 'react'\nimport { useSearchParams, useNavigate } from 'react-router-dom'\nimport Box from '@mui/material/Box'\nimport Typography from '@mui/material/Typography'\nimport Stack from '@mui/material/Stack'\nimport Button from '@mui/material/Button'\nimport TextField from '@mui/material/TextField'\n\nimport Link from './Link'\nimport ErrorMessage from './ErrorMessage'\nimport { useLogin } from '../hooks/auth'\n\nexport default function LoginForm(props){\n  // const navigate = useNavigate()\n  // const [searchParams] = useSearchParams()\n  // const destination = searchParams.get('d')\n  const [email, setEmail] = useState('')\n  const [password, setPassword] = useState('')\n  const [error, setError] = useState(null)\n\n  const login = useLogin({\n    onSuccess(){\n      // setError(null)\n      // navigate(destination || '/')\n    },\n    onFailure(error){\n      if (`${error}`.includes('email or password is invalid')){\n        setError({message: 'email or password is invalid'})\n      }else{\n        setError(error)\n      }\n      // console.error(error)\n      // debugger\n    }\n  })\n\n  const onSubmit = event => {\n    event.preventDefault()\n    setError(null)\n    login.call({ email, password })\n  }\n\n  const submitOnEnter = event => {\n    if (event.key === 'Enter') onSubmit(event)\n  }\n  const submittable = (email && password)\n\n  const disabled = !!login.pending\n  return <Box {...props}>\n    <Typography variant=\"h4\">Login</Typography>\n    <Box {...{\n      component: 'form',\n      onSubmit,\n    }}>\n      <ErrorMessage error={error}/>\n      <TextField\n        autoFocus\n        label=\"email\"\n        autoComplete=\"email\"\n        disabled={disabled}\n        margin=\"normal\"\n        fullWidth\n        name=\"email\"\n        type=\"email\"\n        value={email}\n        onChange={e => { setEmail(e.target.value) }}\n      />\n      <TextField\n        label=\"password\"\n        autoComplete=\"email\"\n        disabled={disabled}\n        margin=\"normal\"\n        fullWidth\n        name=\"password\"\n        type=\"password\"\n        value={password}\n        onChange={e => { setPassword(e.target.value) }}\n      />\n\n      <Stack spacing={2} direction=\"row-reverse\" alignItems=\"center\" mt={2}>\n        <Button\n          type=\"submit\"\n          variant=\"contained\"\n          disabled={disabled || !submittable}\n        >Login</Button>\n        <Button\n          variant=\"outlined\"\n          to=\"/forgot-password\"\n          component={Link}\n        >Forgot Password</Button>\n        <Link variant=\"text\" to=\"/\">back</Link>\n      </Stack>\n    </Box>\n  </Box>\n}\n","import { useState } from 'react'\n\nimport Paper from '@mui/material/Paper'\nimport Typography from '@mui/material/Typography'\nimport Stack from '@mui/material/Stack'\nimport Button from '@mui/material/Button'\nimport Box from '@mui/material/Box'\nimport TextField from '@mui/material/TextField'\n\nimport Link from './Link'\nimport ErrorMessage from './ErrorMessage'\nimport { useSignup } from '../hooks/auth'\n\nexport default function SignupForm({\n  onSuccess,\n  onFailure,\n  ...props\n}){\n  const [email, setEmail] = useState('')\n  const [password, setPassword] = useState('')\n\n  const signup = useSignup({\n    onSuccess,\n    onFailure,\n  })\n\n  const onSubmit = event => {\n    event.preventDefault()\n    signup.call({\n      email: email || undefined,\n      password: password || undefined,\n    })\n  }\n\n  const disabled = !!signup.pending\n  // const emailIsValid = email.length >= 3 && email.includes('@')\n  // const secretKeyIsValid = PassphraseInput.isValid(secretKey)\n  const submittable = !!(email ?? password)\n  return <Paper {...{\n    ...props,\n    sx: {\n      ...props.sx,\n      minWidth: `min(100vw, 500px)`,\n    }\n  }}>\n    <Typography variant=\"h4\" mb={2}>Signup</Typography>\n    <Box {...{\n      component: 'form',\n      onSubmit,\n    }}>\n      <ErrorMessage error={signup.error}/>\n      <TextField\n        label=\"email\"\n        autoComplete=\"email\"\n        disabled={disabled}\n        margin=\"normal\"\n        fullWidth\n        name=\"email\"\n        type=\"email\"\n        value={email}\n        onChange={e => { setEmail(e.target.value) }}\n      />\n      <TextField\n        label=\"password\"\n        autoComplete=\"email\"\n        disabled={disabled}\n        margin=\"normal\"\n        fullWidth\n        name=\"password\"\n        type=\"password\"\n        value={password}\n        onChange={e => { setPassword(e.target.value) }}\n      />\n      <Stack spacing={2} direction=\"row-reverse\" alignItems=\"center\" mt={2}>\n        <Button\n          disabled={disabled || !submittable}\n          type=\"submit\"\n          variant=\"contained\"\n          size=\"large\"\n        >Signup</Button>\n        <Link variant=\"text\" to=\"/signup\">back</Link>\n      </Stack>\n    </Box>\n\n  </Paper>\n}\n"],"names":[],"version":3,"file":"AuthPage.js.map","sourceRoot":"../../"}