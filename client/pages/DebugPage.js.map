{"mappings":"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","sources":["client-src/pages/DebugPage.js","client-src/components/AppError.js","client-src/components/Link.js","client-src/components/Form.js","client-src/components/ButtonRow.js","client-src/components/ErrorMessage.js","client-src/cqrs.js","client-src/hooks/useAsync.js","client-src/hooks/useForceUpdate.js","client-src/components/InspectObject.js"],"sourcesContent":["import * as React from 'react'\nimport { useEffect, useState, useCallback, useMemo } from 'react'\nimport { Routes, Route, useParams, useNavigate, useLocation } from 'react-router-dom'\nimport { ErrorBoundary } from 'react-error-boundary'\n\nimport Container from '@mui/material/Container'\nimport Box from '@mui/material/Box'\nimport Paper from '@mui/material/Paper'\nimport Typography from '@mui/material/Typography'\nimport Stack from '@mui/material/Stack'\nimport Select from '@mui/material/Select'\nimport MenuItem from '@mui/material/MenuItem'\nimport TextField from '@mui/material/TextField'\nimport Button from '@mui/material/Button'\nimport CircularProgress from '@mui/material/CircularProgress'\nimport List from '@mui/material/List'\nimport ListItem from '@mui/material/ListItem'\nimport ListItemButton from '@mui/material/ListItemButton'\nimport ListItemIcon from '@mui/material/ListItemIcon'\nimport ListItemText from '@mui/material/ListItemText'\nimport Skeleton from '@mui/material/Skeleton'\nimport IconButton from '@mui/material/IconButton'\nimport EditIcon from '@mui/icons-material/Edit'\nimport CloseIcon from '@mui/icons-material/Close'\nimport HelpOutlineIcon from '@mui/icons-material/HelpOutline'\nimport KeyboardCommandKeyTwoToneIcon from '@mui/icons-material/KeyboardCommandKeyTwoTone'\nimport CottageIcon from '@mui/icons-material/Cottage'\n\nimport AppError from '../components/AppError'\nimport Link from '../components/Link'\nimport Form from '../components/Form'\nimport ButtonRow from '../components/ButtonRow'\nimport ErrorMessage from '../components/ErrorMessage'\nimport { useQuery, useCommandOnMount } from '../cqrs.js'\nimport InspectObject from '../components/InspectObject'\n// import { useCurrentAgent } from '../resources/auth'\n// import LinkToDid from '../components/LinkToDid'\n// import CopyButton from '../components/CopyButton'\n\nconst defaultExec = () => ({\n  isCommand: false,\n  name: '',\n  optionsJson: '{}',\n})\n\nconst searchToString = object => (new URLSearchParams(object)).toString()\nconst searchToObject = search => Object.fromEntries((new URLSearchParams(search)).entries())\n\nexport default function DebugPage({ APP_NAME }) {\n  const location = useLocation()\n  const name = location.pathname.split('/').reverse()[0]\n  const search = searchToObject(location.search)\n  const optionsJson = search.opts\n  useEffect(\n    () => { document.title = `Debug@ ${APP_NAME}: ${name}(${optionsJson || ''})` },\n    [name, optionsJson]\n  )\n  const { result: spec, error } = useQuery('__spec')\n  const props = { spec, name, optionsJson }\n  return <Container maxWidth={false} disableGutters>\n    <Box sx={{\n      display: 'flex',\n      flexDirection: 'row',\n      minHeight: '100vh',\n      minWidth: '100vw',\n    }}>\n      <SideNav {...{spec}}/>\n      <Box sx={{ flex: '1 1', p: 2 }}>\n        <ErrorMessage {...{error}}/>\n        <ErrorBoundary FallbackComponent={AppError}>\n          <Routes>\n            <Route\n              path=\"/q/:name\"\n              element={<ExecForm key={name} {...props} type=\"query\"/>}\n              title=\"do a query\"\n            />\n            <Route\n              path=\"/c/:name\"\n              element={<ExecForm key={name} {...props} type=\"command\"/>}\n              title=\"do a command\"\n            />\n          </Routes>\n        </ErrorBoundary>\n      </Box>\n    </Box>\n  </Container>\n}\n\nfunction SideNav({ spec }){\n  return <Box sx={{\n    display: 'flex',\n    flexDirection: 'column',\n    backgroundColor: 'primary.dark',\n    minWidth: `max(10vw, 175px)`,\n    maxWidth: `max(20vw, 400px)`,\n    overflowX: 'auto',\n  }}>\n    <Typography variant=\"h6\"\n      sx={{\n        my: 2,\n        textAlign: 'center',\n      }}\n    >Debug {process.env.APP_NAME}</Typography>\n    <SideNavButton {...{\n      to: `/`,\n      icon: <CottageIcon/>,\n      title: 'Home',\n    }}/>\n    <SideNavButtonList {...{\n      name: 'Queries',\n      types: spec?.queries,\n      icon: <HelpOutlineIcon/>,\n      linkPrefix: '/debug/q/',\n    }}/>\n    <SideNavButtonList {...{\n      name: 'Commands',\n      types: spec?.commands,\n      icon: <KeyboardCommandKeyTwoToneIcon/>,\n      linkPrefix: '/debug/c/',\n    }}/>\n  </Box>\n}\n\nfunction SideNavButton({ icon, title, subtitle, ...props }){\n  if (props.to) props.component = Link\n  return <ListItem disablePadding>\n    <ListItemButton {...props}>\n      <ListItemIcon sx={{minWidth: '30px'}}>\n        {icon}\n      </ListItemIcon>\n      <ListItemText primary={title} secondary={subtitle} />\n    </ListItemButton>\n  </ListItem>\n}\n\nfunction SideNavButtonList({ name, types, icon, linkPrefix }){\n  return <Box>\n    <Typography variant=\"h6\" sx={{pl: 1}}>{name}</Typography>\n    <List dense sx={{pt: 0}}>\n      {Array.isArray(types)\n        ? [...types].sort().map(({name, args}) =>\n          <SideNavButton {...{\n            key: name,\n            to: `${linkPrefix }${name}`,\n            icon,\n            title: name,\n            subtitle: args,\n          }}/>\n        )\n        : Array(3).fill().map((_, i) =>\n          <Skeleton key={i} animation=\"wave\" height=\"40px\" />\n        )\n      }\n    </List>\n  </Box>\n}\n\nfunction ExecForm({ spec, type, name, optionsJson = '{}' }){\n  const location = useLocation()\n  const navigate = useNavigate()\n  const isCommand = type === 'command'\n  const options = safeJsonParse(optionsJson)\n  const optionsJsonIsValid = !(options instanceof Error)\n  const submittable = !!(name && optionsJsonIsValid)\n\n  const [execution, setExecution] = useState(\n    (type === 'query' && submittable)\n      ? { name, options }\n      : null\n  )\n  const [executionDone, setExecutionDone] = useState(false)\n\n  const setOptionsJson = useCallback(\n    (optionsJson, replace = false) => {\n      // TODO include other existing search params\n      const params = {}\n      if (optionsJson) params.opts = optionsJson\n      const newSearch = searchToString(params)\n      let url = location.pathname\n      if (newSearch) url += '?' + newSearch\n      navigate(url, { replace })\n    },\n    [],\n  )\n\n  const reset = useCallback(\n    () => {\n      setOptionsJson(undefined, false)\n      setExecution(null)\n      setExecutionDone(false)\n    },\n    [setOptionsJson],\n  )\n\n  const onSubmit = useCallback(\n    () => { if (submittable) setExecution({ id: Date.now(), options }) },\n    [name, options],\n  )\n\n  const names = spec && (isCommand ? spec.commands : spec.queries) || []\n  const disabled = !!(execution && !executionDone)\n  const Exec = isCommand ? ExecuteCommand : ExecuteQuery\n\n  return <Box>\n    <Form {...{disabled, onSubmit}}>\n      <Stack spacing={2}>\n        <Stack direction=\"row\" spacing={2}>\n          <Typography variant=\"h4\">{type}</Typography>\n          <Select\n            value={name}\n            // onChange={e => setName(e.target.value)}\n            autoWidth\n          >\n            {names.map(({name}) =>\n              <MenuItem\n                key={name}\n                value={name}\n                component={Link}\n                to={`/debug/${isCommand ? 'c': 'q'}/${name}`}\n              >{name}</MenuItem>)\n            }\n          </Select>\n        </Stack>\n        <TextField\n          disabled={disabled}\n          label=\"options (JSON)\"\n          fullWidth\n          multiline\n          value={optionsJson}\n          onChange={e => { setOptionsJson(e.target.value, true) }}\n          error={optionsJsonIsValid ? false : true}\n        />\n        <ButtonRow sx={{mt: 2}}>\n          <Button\n            disabled={disabled || !submittable}\n            variant=\"contained\"\n            type=\"submit\"\n            autoFocus\n          >{isCommand ? 'execute' : 'query'}</Button>\n\n          <Button\n            disabled={disabled}\n            variant=\"text\"\n            onClick={reset}\n          >{'reset'}</Button>\n        </ButtonRow>\n      </Stack>\n    </Form>\n    <hr/>\n    <Box>\n      {execution\n        ? <Exec {...{\n          key: execution.id,\n          id: execution.id,\n          name,\n          options: execution.options,\n          onComplete(){ setExecutionDone(true) }\n        }}/>\n        : null\n      }\n    </Box>\n  </Box>\n}\n\nfunction ExecuteQuery({ id, name, options, onComplete }){\n  const results = useQuery(name, options, {\n    dedupingInterval: 0,\n    revalidateOnMount: true,\n    revalidateOnFocus: true,\n  })\n  useEffect(\n    () => { if (!results.loading) onComplete() },\n    [results.loading]\n  )\n  return <Execution {...{ ...results, name, options, }}/>\n}\n\nfunction ExecuteCommand({ name, options, onComplete }){\n  const results = useCommandOnMount(name, options, { onComplete })\n  return <Execution {...{ ...results, name, options, }}/>\n}\n\nfunction Execution({ name, options, result, loading, error }){\n  return <Box>\n    {\n      loading\n        ? <CircularProgress/>\n        : error\n          ? <ErrorMessage error={error}/>\n          : <InspectObject\n            object={result}\n            sx={{\n              m: 0,\n              backgroundColor: '#232323',\n              // backgroundColor: t => t.palette.grey[800],\n            }}\n          />\n    }\n  </Box>\n}\n\nfunction Command({ name, options,  ...prop }){\n  const command = useCommandOnMount(name, options)\n  return <Tile {...{ title: `command: ${name}`, ...prop}}>\n    <InspectObject object={{ options }}/>\n    <InspectObject object={command}/>\n  </Tile>\n}\n\nfunction safeJsonParse(json){\n  try{\n    return JSON.parse(json)\n  } catch(error){\n    return error\n  }\n}\n","import * as React from 'react'\nimport Container from '@mui/material/Container'\nimport Paper from '@mui/material/Paper'\nimport Typography from '@mui/material/Typography'\nimport Box from '@mui/material/Box'\nimport Alert from '@mui/material/Alert'\nimport Button from '@mui/material/Button'\n\nexport default function AppError({error, resetErrorBoundary}) {\n  return (\n    <Container maxWidth=\"lg\">\n      <Paper\n        elevation={3}\n        role=\"alert\"\n        sx={{ m: 3, p: 3 }}\n      >\n        <Alert severity=\"error\">App Error</Alert>\n        <Box component=\"pre\" sx={{overflow: 'scroll'}}>\n          <Typography variant=\"h4\">{error.message}</Typography>\n          <br/>\n          {error.stack}\n        </Box>\n        <Button\n          variant=\"contained\"\n          onClick={resetErrorBoundary}\n        >Try again</Button>\n      </Paper>\n    </Container>\n  )\n}\n","import * as React from 'react'\nimport { Link as RouterLink } from 'react-router-dom'\nimport MUILink from '@mui/material/Link'\n\nconst Link = React.forwardRef(({...props}, ref) => {\n  props.component = 'a'\n  if (props.to){\n    props.component = RouterLink\n  }\n  if (props.to && props.to.startsWith('http')){\n    props.href = props.to\n    delete props.to\n    props.rel = props.rel || \"noopener noreferrer\"\n    props.target = props.target || \"_blank\"\n    props.component = 'a'\n  }\n  return <MUILink {...props} ref={ref}/>\n})\n\nLink.displayName = 'Link'\n\nexport default Link\n","import * as React from 'react'\nimport Box from '@mui/material/Box'\n\nexport default function Form({\n  disabled, children, onSubmit, ...props\n}){\n  const _onSubmit = React.useCallback(\n    event => {\n      event.preventDefault()\n      if (disabled || !onSubmit) return\n      const formData = new FormData(event.currentTarget)\n      onSubmit(event, formData)\n    },\n    [disabled, onSubmit]\n  )\n  return <Box {...{\n    component: 'form',\n    disabled,\n    ...props,\n    onSubmit: _onSubmit,\n  }}>{children}</Box>\n}\n","import * as React from 'react'\nimport Stack from '@mui/material/Stack'\n\nexport default function ButtonRow({ children, ...props }){\n  return <Stack\n    spacing={2}\n    direction=\"row-reverse\"\n    alignItems=\"center\"\n    {...props}\n  >{children}</Stack>\n}\n","import * as React from 'react'\nimport Alert from '@mui/material/Alert'\n\nconst ErrorMessage = ({error, ...props}) => {\n  if (!error) return null\n  return <Alert severity=\"error\" {...props}>{error.message}</Alert>\n}\n\nexport default ErrorMessage\n","import { useEffect, useCallback } from 'react'\nimport useSWR, { useSWRConfig } from 'swr'\nimport useAsync from './hooks/useAsync'\n\nexport async function fetchQuery(name, options = {}){\n  const params = new URLSearchParams(options)\n  return await apiFetch('GET', `/api/${name}?${params}`)\n}\n\nexport async function fetchCommand(name, options){\n  return await apiFetch('POST', `/api/${name}`, options)\n}\n\n// window.cqrs = {\n//   query: fetchQuery,\n//   command: fetchCommand,\n// }\n\nasync function apiFetch(method, path, body, tries = 0){\n  const res = await fetch(path, {\n    method,\n    headers: {\n      'Accepts': 'application/json',\n      'Content-Type': 'application/json',\n    },\n    body: body ? JSON.stringify(body) : undefined,\n  })\n  if (res.status === 502){\n    throw new Error(`API server looks down or you're offline`)\n  }\n  if (res.status === 504 && tries < 5) {\n    await wait(500)\n    return apiFetch(method, path, body, tries + 1)\n  }\n  const { result, error } = await res.json()\n  if (error) throw new Error(error.message)\n  return result || null\n}\n\nconst wait = ms => new Promise(resolve => {\n  setTimeout(() => { resolve() }, ms)\n})\n\nexport function useQuery(name, options = {}, config){\n  const swrKey = name ? [name, options] : null\n  const { data: result, error, mutate } = useSWR(swrKey, {\n    ...config,\n    fetcher: fetchQuery,\n  })\n  const loading = typeof result === 'undefined' && !error\n  const reload = useCallback(() => { mutate() }, [mutate])\n  return { result, loading, error, mutate, reload }\n}\n\nexport function useCommand(name, config){\n  return useAsync(\n    options => fetchCommand(name, options),\n    config\n  )\n}\n\nexport function useCommandOnMount(name, options, config){\n  const command = useCommand(name, config)\n  useEffect(\n    () => { if (command.idle) command.call(options) },\n    [name, options]\n  )\n  return command\n}\n","import * as React from 'react'\nimport { useState, useCallback, useEffect } from 'react'\nimport useForceUpdate from './useForceUpdate'\n\nconst STATES = ['idle', 'pending', 'resolved', 'rejected']\nexport default function useAsync(asyncFunction, config = {}){\n  const { callOnMount, onSuccess, onFailure, onComplete } = config\n  const forceUpdate = useForceUpdate()\n  const [ctx] = useState({})\n\n  const setState = state => {\n    ctx.state = STATES[state]\n    STATES.forEach((name, index) => {\n      ctx[name] = index === state\n    })\n    forceUpdate()\n  }\n\n  if (ctx.state === undefined) setState(0)\n\n  ctx.call = useCallback(\n    (...args) => {\n      if (ctx.promise) throw new Error(`already executing`)\n      ctx.promise = new Promise((resolve, reject) => {\n        asyncFunction(...args).then(resolve, reject)\n      }).then(\n        async result => {\n          delete ctx.promise\n          ctx.result = result\n          setState(2)\n          if (onSuccess) await onSuccess(result)\n          return result\n        },\n        async error => {\n          delete ctx.promise\n          ctx.error = error\n          if (onFailure) await onFailure(error)\n          setState(3)\n          return error\n        },\n      ).then(result => {\n        onComplete(result)\n      })\n      setState(1)\n      return ctx.promise\n    },\n    [asyncFunction]\n  )\n\n  useEffect(\n    () => { if (callOnMount && ctx.state === STATES['0']) ctx.call() },\n    [ctx.call, callOnMount, ctx.state]\n  )\n\n  return ctx\n}\n","import { useState, useCallback, useEffect } from 'react'\n\nconst noop = () => {}\n\nexport default function useForceUpdate(){\n  let setState = useState()[1]\n  useEffect(() => () => { setState = noop }, [])\n  return useCallback(() => { setState({}) }, [])\n}\n","import * as React from 'react'\nimport Box from '@mui/material/Box'\n\nexport default function InspectObject({ object, sx, ...props }){\n  let string\n  if (typeof object === 'function'){\n    string = object.toString()\n  }else if (typeof object === 'undefined'){\n    string = 'undefined'\n  }else{\n    try{\n      string = inspect(object)\n    }catch(error){\n      string = `ERROR: ${error}`\n    }\n  }\n  return <Box\n    className=\"InspectObject\"\n    sx={{\n      m: 1,\n      backgroundColor: 'background.paper',\n      overflow: 'auto',\n      whiteSpace: 'pre',\n      fontFamily: 'monospace, mono',\n      ...sx,\n    }}\n    {...props}\n  >\n    {string}\n  </Box>\n}\n\nfunction inspect(object, indentation = 2){\n  return JSON.stringify(\n    object,\n    replaceUndefinedWithUndefinedString,\n    indentation\n  ).replace(/\"UNDEFINEDPLACEHOLDER\"/g, 'undefined')\n}\n\nconst replaceUndefinedWithUndefinedString = (k, v) => {\n  if (v === undefined) return 'UNDEFINEDPLACEHOLDER'\n  if (v instanceof Error) return { message: v.message, stack: v.stack }\n  return v\n}\n"],"names":[],"version":3,"file":"DebugPage.js.map","sourceRoot":"../../"}