{"mappings":"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","sources":["client-src/pages/DebugPage.js","client-src/components/AppError.js","client-src/components/Link.js","client-src/components/Form.js","client-src/components/ButtonRow.js","client-src/components/ErrorMessage.js","client-src/hooks/cqrpc.js","client-src/hooks/useAsync.js","client-src/hooks/useForceUpdate.js","shared/wait.js","client-src/components/InspectObject.js"],"sourcesContent":["import * as React from 'react'\nimport { useEffect, useState, useCallback } from 'react'\nimport { Routes, Route, useNavigate, useLocation } from 'react-router-dom'\nimport { ErrorBoundary } from 'react-error-boundary'\n\nimport Container from '@mui/material/Container'\nimport Box from '@mui/material/Box'\nimport Typography from '@mui/material/Typography'\nimport Stack from '@mui/material/Stack'\nimport Select from '@mui/material/Select'\nimport MenuItem from '@mui/material/MenuItem'\nimport TextField from '@mui/material/TextField'\nimport Button from '@mui/material/Button'\nimport CircularProgress from '@mui/material/CircularProgress'\nimport List from '@mui/material/List'\nimport ListItem from '@mui/material/ListItem'\nimport ListItemButton from '@mui/material/ListItemButton'\nimport ListItemIcon from '@mui/material/ListItemIcon'\nimport ListItemText from '@mui/material/ListItemText'\nimport Skeleton from '@mui/material/Skeleton'\nimport HelpOutlineIcon from '@mui/icons-material/HelpOutline'\nimport KeyboardCommandKeyTwoToneIcon from '@mui/icons-material/KeyboardCommandKeyTwoTone'\nimport CottageIcon from '@mui/icons-material/Cottage'\n\nimport AppError from '../components/AppError'\nimport Link from '../components/Link'\nimport Form from '../components/Form'\nimport ButtonRow from '../components/ButtonRow'\nimport ErrorMessage from '../components/ErrorMessage'\nimport { useQuery, useCommandOnMount } from '../hooks/cqrpc.js'\nimport InspectObject from '../components/InspectObject'\n\nconst searchToString = object => (new URLSearchParams(object)).toString()\nconst searchToObject = search => Object.fromEntries((new URLSearchParams(search)).entries())\n\nexport default function DebugPage({ appName }) {\n  const location = useLocation()\n  const name = location.pathname.split('/').reverse()[0]\n  const search = searchToObject(location.search)\n  const optionsJson = search.opts\n  useEffect(\n    () => { document.title = `Debug ${appName}: ${name}(${optionsJson || ''})` },\n    [name, optionsJson]\n  )\n  const { result: spec, error } = useQuery('debug.getQueriesAndCommands')\n  const props = { spec, name, optionsJson }\n  return <Container maxWidth={false} disableGutters>\n    <Box sx={{\n      display: 'flex',\n      flexDirection: 'row',\n      minHeight: '100vh',\n      minWidth: '100vw',\n    }}>\n      <SideNav {...{appName, spec}}/>\n      <Box sx={{ flex: '1 1', p: 2 }}>\n        <ErrorMessage {...{error}}/>\n        <ErrorBoundary onError={AppError}>\n          <Routes>\n            <Route\n              path=\"/q/:name\"\n              element={<ExecForm key={name} {...props} type=\"query\"/>}\n              title=\"do a query\"\n            />\n            <Route\n              path=\"/c/:name\"\n              element={<ExecForm key={name} {...props} type=\"command\"/>}\n              title=\"do a command\"\n            />\n          </Routes>\n        </ErrorBoundary>\n      </Box>\n    </Box>\n  </Container>\n}\n\nfunction SideNav({ appName, spec }){\n  return <Box sx={{\n    display: 'flex',\n    flexDirection: 'column',\n    backgroundColor: 'primary.dark',\n    minWidth: `max(10vw, 175px)`,\n    maxWidth: `max(20vw, 400px)`,\n    overflowX: 'auto',\n  }}>\n    <Typography variant=\"h6\"\n      sx={{\n        my: 2,\n        textAlign: 'center',\n      }}\n    >Debug {appName}</Typography>\n    <SideNavButton {...{\n      to: `/`,\n      icon: <CottageIcon/>,\n      title: 'Home',\n    }}/>\n    <SideNavButtonList {...{\n      name: 'Queries',\n      tree: spec?.queries,\n      icon: <HelpOutlineIcon/>,\n      linkPrefix: '/debug/q/',\n    }}/>\n    <SideNavButtonList {...{\n      name: 'Commands',\n      tree: spec?.commands,\n      icon: <KeyboardCommandKeyTwoToneIcon/>,\n      linkPrefix: '/debug/c/',\n    }}/>\n  </Box>\n}\n\nfunction SideNavButton({ icon, title, subtitle, ...props }){\n  if (props.to) props.component = Link\n  return <ListItem disablePadding>\n    <ListItemButton {...props}>\n      <ListItemIcon sx={{minWidth: '30px'}}>\n        {icon}\n      </ListItemIcon>\n      <ListItemText primary={title} secondary={subtitle} />\n    </ListItemButton>\n  </ListItem>\n}\n\nfunction SideNavButtonList({ name, tree, icon, linkPrefix }){\n  const objectToNodes = obj => {\n    const nodes = []\n    for (const key in obj){\n      if (key.startsWith('__')) continue;\n      const value = obj[key]\n      const node = (value && value.name && value.source)\n        ? <SideNavButton {...{\n          key,\n          to: `${linkPrefix}${key}`,\n          icon,\n          title: key,\n          subtitle: value.args,\n        }}/>\n        : <div>DOWN</div>\n      nodes.push(node)\n    }\n    return nodes\n  }\n  const list = tree\n    ? objectToNodes(tree)\n    : Array(3).fill('').map((_, i) =>\n      <Skeleton key={i} animation=\"wave\" height=\"40px\" />\n    )\n  return <Box>\n    <Typography variant=\"h6\" sx={{pl: 1}}>{name}</Typography>\n    <List dense sx={{pt: 0}}>{list}</List>\n  </Box>\n}\n\nfunction ExecForm({ spec, type, name, optionsJson = '{}' }){\n  const location = useLocation()\n  const navigate = useNavigate()\n  const isCommand = type === 'command'\n  const options = safeJsonParse(optionsJson)\n  const optionsJsonIsValid = !(options instanceof Error)\n  const submittable = !!(name && optionsJsonIsValid)\n\n  const [execution, setExecution] = useState(\n    (type === 'query' && submittable)\n      ? { name, options }\n      : null\n  )\n  const [executionDone, setExecutionDone] = useState(false)\n\n  const setOptionsJson = useCallback(\n    (optionsJson, replace = false) => {\n      // TODO include other existing search params\n      const params = {}\n      if (optionsJson) params.opts = optionsJson\n      const newSearch = searchToString(params)\n      let url = location.pathname\n      if (newSearch) url += '?' + newSearch\n      navigate(url, { replace })\n    },\n    [],\n  )\n\n  const reset = useCallback(\n    () => {\n      setOptionsJson(undefined, false)\n      setExecution(null)\n      setExecutionDone(false)\n    },\n    [setOptionsJson],\n  )\n\n  const onSubmit = useCallback(\n    () => { if (submittable) setExecution({ id: Date.now(), options }) },\n    [name, options],\n  )\n\n  const procedures = spec && Object.values(isCommand ? spec.commands : spec.queries) || []\n  const disabled = !!(execution && !executionDone)\n  const Exec = isCommand ? ExecuteCommand : ExecuteQuery\n\n  return <Box>\n    <Form {...{disabled, onSubmit}}>\n      <Stack spacing={2}>\n        <Stack direction=\"row\" spacing={2}>\n          <Typography variant=\"h4\">{type}</Typography>\n          <Select value={name} autoWidth>\n            {procedures.map(({name}) =>\n              <MenuItem\n                key={name}\n                value={name}\n                component={Link}\n                to={`/debug/${isCommand ? 'c': 'q'}/${name}`}\n              >{name}</MenuItem>)\n            }\n          </Select>\n        </Stack>\n        <TextField\n          disabled={disabled}\n          label=\"options (JSON)\"\n          fullWidth\n          multiline\n          value={optionsJson}\n          onChange={e => { setOptionsJson(e.target.value, true) }}\n          error={!optionsJsonIsValid}\n        />\n        <ButtonRow sx={{mt: 2}}>\n          <Button\n            disabled={disabled || !submittable}\n            variant=\"contained\"\n            type=\"submit\"\n            autoFocus\n          >{isCommand ? 'execute' : 'query'}</Button>\n\n          <Button\n            disabled={disabled}\n            variant=\"text\"\n            onClick={reset}\n          >{'reset'}</Button>\n        </ButtonRow>\n      </Stack>\n    </Form>\n    <hr/>\n    <Box>\n      {execution\n        ? <Exec {...{\n          key: execution.id,\n          id: execution.id,\n          name,\n          options: execution.options,\n          onComplete(){ setExecutionDone(true) }\n        }}/>\n        : null\n      }\n    </Box>\n  </Box>\n}\n\nfunction ExecuteQuery({ name, options, onComplete }){\n  const results = useQuery(name, options, {\n    dedupingInterval: 0,\n    revalidateOnMount: true,\n    revalidateOnFocus: true,\n  })\n  useEffect(\n    () => { if (!results.loading) onComplete() },\n    [results.loading]\n  )\n  return <Execution {...{ ...results, name, options, }}/>\n}\n\nfunction ExecuteCommand({ name, options, onComplete }){\n  const results = useCommandOnMount(name, options, { onComplete })\n  return <Execution {...{ ...results, name, options, }}/>\n}\n\nfunction Execution({ /*name, options,*/ result, loading, error }){\n  return <Box>\n    {\n      loading\n        ? <CircularProgress/>\n        : error\n          ? <ErrorMessage error={error}/>\n          : <InspectObject\n            object={result}\n            sx={{\n              m: 0,\n              backgroundColor: '#232323',\n              // backgroundColor: t => t.palette.grey[800],\n            }}\n          />\n    }\n  </Box>\n}\n\n\nfunction safeJsonParse(json){\n  try{\n    return JSON.parse(json)\n  } catch(error){\n    return error\n  }\n}\n","import * as React from 'react'\nimport Container from '@mui/material/Container'\nimport Paper from '@mui/material/Paper'\nimport Typography from '@mui/material/Typography'\nimport Box from '@mui/material/Box'\nimport Alert from '@mui/material/Alert'\nimport Button from '@mui/material/Button'\n\nexport default function AppError({error, resetErrorBoundary}) {\n  return (\n    <Container maxWidth=\"lg\">\n      <Paper\n        elevation={3}\n        role=\"alert\"\n        sx={{ m: 3, p: 3 }}\n      >\n        <Alert severity=\"error\">App Error</Alert>\n        <Box component=\"pre\" sx={{overflow: 'scroll'}}>\n          <Typography variant=\"h4\">{error.message}</Typography>\n          <br/>\n          {error.stack}\n        </Box>\n        <Button\n          variant=\"contained\"\n          onClick={resetErrorBoundary}\n        >Try again</Button>\n      </Paper>\n    </Container>\n  )\n}\n","import * as React from 'react'\nimport { Link as RouterLink } from 'react-router-dom'\nimport MUILink from '@mui/material/Link'\n\nconst Link = React.forwardRef(({...props}, ref) => {\n  props.component = 'a'\n  if (props.to){\n    props.component = RouterLink\n  }\n  if (props.to && props.to.startsWith('http')){\n    props.href = props.to\n    delete props.to\n    props.rel = props.rel || \"noopener noreferrer\"\n    props.target = props.target || \"_blank\"\n    props.component = 'a'\n  }\n  return <MUILink {...props} ref={ref}/>\n})\n\nLink.displayName = 'Link'\n\nexport default Link\n","import * as React from 'react'\nimport Box from '@mui/material/Box'\n\nexport default function Form({\n  disabled, children, onSubmit, ...props\n}){\n  const _onSubmit = React.useCallback(\n    event => {\n      event.preventDefault()\n      if (disabled || !onSubmit) return\n      const formData = new FormData(event.currentTarget)\n      onSubmit(event, formData)\n    },\n    [disabled, onSubmit]\n  )\n  return <Box {...{\n    component: 'form',\n    disabled,\n    ...props,\n    onSubmit: _onSubmit,\n  }}>{children}</Box>\n}\n","import * as React from 'react'\nimport Stack from '@mui/material/Stack'\n\nexport default function ButtonRow({ children, ...props }){\n  return <Stack\n    spacing={2}\n    direction=\"row-reverse\"\n    alignItems=\"center\"\n    {...props}\n  >{children}</Stack>\n}\n","import * as React from 'react'\nimport Alert from '@mui/material/Alert'\n\nconst ErrorMessage = ({error, ...props}) => {\n  if (!error) return null\n  return <Alert severity=\"error\" {...props}>{error.message}</Alert>\n}\n\nexport default ErrorMessage\n","// Command. Query. Remote. Procedure. Call\nimport { useEffect, useCallback } from 'react'\nimport useSWR from 'swr'\nimport useAsync from './useAsync'\nimport wait from '../../shared/wait.js'\n\nexport async function fetchQuery(name, options = {}){\n  const json = JSON.stringify(options)\n  const params = json === '{}' ? '' :\n    '?' + new URLSearchParams({ o: json })\n  return await apiFetch('GET', `/api/${name}${params}`)\n}\n\nexport async function fetchCommand(name, options){\n  return await apiFetch('POST', `/api/${name}`, options)\n}\n/**/\nglobal.cqrpc = {\n  query: fetchQuery,\n  command: fetchCommand,\n}\n\nasync function apiFetch(method, path, body, tries = 0){\n  const res = await fetch(path, {\n    method,\n    headers: {\n      'Accepts': 'application/json',\n      'Content-Type': 'application/json',\n    },\n    body: body ? JSON.stringify(body) : undefined,\n  })\n  if (res.status === 502){\n    throw new Error(`API server looks down or you're offline`)\n  }\n  if (res.status === 504 && tries < 5) {\n    await wait(500)\n    return apiFetch(method, path, body, tries + 1)\n  }\n  const { result, error } = await res.json()\n  if (error) throw new Error(error.message)\n  return result || null\n}\n\nexport function useQuery(name, options = {}, config){\n  const swrKey = name ? [name, options] : null\n  const { data: result, error, mutate } = useSWR(swrKey, {\n    ...config,\n    fetcher: fetchQuery,\n  })\n  const loading = typeof result === 'undefined' && !error\n  const reload = useCallback(() => { mutate() }, [mutate])\n  return { result, loading, error, mutate, reload }\n}\n\nexport function useCommand(name, config){\n  return useAsync(\n    options => fetchCommand(name, options),\n    config\n  )\n}\n\nexport function useCommandOnMount(name, options, config){\n  const command = useCommand(name, config)\n  useEffect(\n    () => { if (command.idle) command.call(options) },\n    [name, options]\n  )\n  return command\n}\n","import * as React from 'react'\nimport { useRef, useMemo, useCallback, useEffect } from 'react'\nimport useForceUpdate from './useForceUpdate'\n\nconst STATES = ['idle', 'pending', 'resolved', 'rejected']\nexport default function useAsync(asyncFunction, config = {}){\n  const { callOnMount, onSuccess, onFailure, onComplete } = config\n  const callbacks = useRef()\n  Object.assign(callbacks, { onSuccess, onFailure, onComplete })\n  const forceUpdate = useForceUpdate()\n  const ctx = useMemo(() => ({}), [asyncFunction, callOnMount])\n\n  ctx.call = useCallback(\n    (...args) => {\n      if (ctx.promise) throw new Error(`already executing`)\n      const setState = state => {\n        ctx.state = STATES[state]\n        STATES.forEach((name, index) => {\n          ctx[name] = index === state\n        })\n        forceUpdate()\n      }\n      ctx.promise = new Promise((resolve, reject) => {\n        asyncFunction(...args).then(resolve, reject)\n      }).then(\n        async result => {\n          delete ctx.promise\n          ctx.result = result\n          setState(2)\n          if (callbacks.onSuccess) await callbacks.onSuccess(result)\n          return result\n        },\n        async error => {\n          delete ctx.promise\n          ctx.error = error\n          if (callbacks.onFailure) await callbacks.onFailure(error)\n          setState(3)\n          return error\n        },\n      ).then(async result => {\n        if (callbacks.onComplete) await callbacks.onComplete(result)\n      })\n      setState(1)\n      return ctx.promise\n    },\n    [ctx]\n  )\n\n  useEffect(\n    () => { if (callOnMount && ctx.idle) ctx.call() },\n    [ctx]\n  )\n\n  return ctx\n}\n","import { useState, useCallback, useEffect } from 'react'\n\nconst noop = () => {}\n\nexport default function useForceUpdate(){\n  let setState = useState()[1]\n  useEffect(() => () => { setState = noop }, [])\n  return useCallback(() => { setState({}) }, [])\n}\n","const wait = ms => new Promise(resolve => {\n  setTimeout(() => { resolve() }, ms)\n})\nexport default wait\n","import * as React from 'react'\nimport Box from '@mui/material/Box'\n\nexport default function InspectObject({ object, sx, ...props }){\n  let string\n  if (typeof object === 'function'){\n    string = object.toString()\n  }else if (typeof object === 'undefined'){\n    string = 'undefined'\n  }else{\n    try{\n      string = inspect(object)\n    }catch(error){\n      string = `ERROR: ${error}`\n    }\n  }\n  return <Box\n    className=\"InspectObject\"\n    sx={{\n      m: 1,\n      backgroundColor: 'background.paper',\n      overflow: 'auto',\n      whiteSpace: 'pre',\n      fontFamily: 'monospace, mono',\n      ...sx,\n    }}\n    {...props}\n  >\n    {string}\n  </Box>\n}\n\nfunction inspect(object, indentation = 2){\n  return JSON.stringify(\n    object,\n    replaceUndefinedWithUndefinedString,\n    indentation\n  ).replace(/\"UNDEFINEDPLACEHOLDER\"/g, 'undefined')\n}\n\nconst replaceUndefinedWithUndefinedString = (k, v) => {\n  if (v === undefined) return 'UNDEFINEDPLACEHOLDER'\n  if (v instanceof Error) return { message: v.message, stack: v.stack }\n  return v\n}\n"],"names":[],"version":3,"file":"DebugPage.js.map","sourceRoot":"../../"}