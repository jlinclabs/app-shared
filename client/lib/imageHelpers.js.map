{"mappings":"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","sources":["client-src/lib/imageHelpers.js"],"sourcesContent":["export function resizeToFill({ canvasWidth, canvasHeight, imageHeight, imageWidth }) {\n  let drawnWidth, drawnHeight, x, y\n\n  if (imageHeight < canvasHeight && imageWidth < canvasWidth) {\n    drawnWidth = imageWidth\n    drawnHeight = imageHeight\n    x = (canvasWidth - drawnWidth) / 2\n    y = (canvasHeight - drawnHeight) / 2\n  } else if ((imageWidth / canvasWidth) > (imageHeight / canvasHeight)) {\n    drawnWidth = (canvasHeight / imageHeight) * imageWidth\n    drawnHeight = canvasHeight\n    x = (canvasWidth - drawnWidth) / 2\n    y = 0\n  } else {\n    drawnWidth = canvasWidth\n    drawnHeight = (canvasWidth / imageWidth) * imageHeight\n    x = 0\n    y = (canvasHeight - drawnHeight) / 2\n  }\n  return { x, y, drawnWidth, drawnHeight }\n}\n\nexport function resizeToFit({ canvasWidth, canvasHeight, imageHeight, imageWidth }){\n  let drawnWidth, drawnHeight\n\n  if (imageHeight < canvasHeight && imageWidth < canvasWidth) {\n    drawnWidth = imageWidth\n    drawnHeight = imageHeight\n  } else {\n    const ratio = (imageHeight / canvasHeight) > (imageWidth / canvasWidth)\n      ? imageHeight / canvasHeight\n      : imageWidth / canvasWidth\n\n    drawnWidth = imageWidth / ratio\n    drawnHeight = imageHeight / ratio\n  }\n\n  const x = drawnWidth < canvasWidth ? (canvasWidth - drawnWidth) / 2 : 0\n  const y = drawnHeight < canvasHeight ? (canvasHeight - drawnHeight) / 2 : 0\n  return { x, y, drawnWidth, drawnHeight }\n}\n\n\nexport function fileToImageDataURL(file){\n  return new Promise((resolve, reject) => {\n    const reader = new global.FileReader()\n    reader.onload = () => {\n      resolve(reader.result)\n    }\n    reader.onerror = () => {\n      reject(reader.error)\n    }\n    reader.readAsDataURL(file)\n  })\n}\n\nexport function loadImage(src){\n  return new Promise((resolve, reject) => {\n    const image = new global.Image()\n    image.onload = function(){ resolve(image) }\n    image.onerror = function(error){\n      if (!(error instanceof Error)){\n        console.error(error)\n        error = new Error(`Error loading image`)\n      }\n      reject(error)\n    }\n    image.setAttribute('crossOrigin', 'anonymous')\n    image.src = src\n  })\n}\n\nexport function imageToDataURL(image, options = {}){\n  const {\n    type = 'image/png',\n    encoderOptions,\n  } = options\n  const canvas = global.document.createElement('canvas')\n  canvas.width = image.naturalWidth\n  canvas.height = image.naturalHeight\n  const ctx = canvas.getContext('2d')\n  ctx.drawImage(image, 0, 0)\n  return canvas.toDataURL(type, encoderOptions)\n}\n\nexport async function deanimateImage(image, options = {}){\n  if (!image.src.match(/data:image\\/(gif|webp)/)) return image\n  const src = imageToDataURL(image, options)\n  return await loadImage(src)\n}\n\nexport async function fileToImage(file){\n  return await loadImage(\n    await fileToImageDataURL(file)\n  )\n}\n\nexport async function resizeImage({\n  image,\n  dataUri,\n  height,\n  width,\n  resizeTo,\n  type = 'image/png',\n  encoderOptions,\n}){\n  if (dataUri) image = await loadImage(dataUri)\n  const onResize = resizeTo === 'fill' ? resizeToFill : resizeToFit\n  const canvas = global.document.createElement('canvas')\n  canvas.width = width\n  canvas.height = height\n  const context = canvas.getContext('2d')\n  const {x, y, drawnWidth, drawnHeight} = onResize({\n    canvasWidth: width,\n    canvasHeight: height,\n    imageHeight: image.height,\n    imageWidth: image.width,\n  })\n\n  context.drawImage(image, x, y, drawnWidth, drawnHeight)\n\n  return canvas.toDataURL(type, encoderOptions)\n}\n\nexport const aspectRatioToTopPadding = (height, width) => `${(height / width) * 100}%`\n\n// https://stackoverflow.com/questions/12168909/blob-from-dataurl\nexport function dataURItoFile(dataURI) {\n  const matches = dataURI.match(/^data:(.+?);base64,(.+)$/)\n  const type = matches[1]\n  const byteString = atob(matches[2])\n  // write the bytes of the string to an ArrayBuffer\n  const arrayBuffer = new ArrayBuffer(byteString.length)\n  // create a view into the buffer\n  const intArray = new Uint8Array(arrayBuffer)\n  // set the bytes of the buffer to the correct values\n  for (let i = 0; i < byteString.length; i++)\n    intArray[i] = byteString.charCodeAt(i)\n  const fileName = `file.${type.split('/')[1]}`\n  // write the ArrayBuffer to a blob, and you're done\n  return new File([arrayBuffer], fileName, {type})\n}\n"],"names":[],"version":3,"file":"imageHelpers.js.map","sourceRoot":"../../"}